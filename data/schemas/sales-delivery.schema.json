{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "sales-delivery",
  "title": "銷貨單 (Sales Delivery Note)",
  "description": "POST /api/generate { reportType: \"sales_delivery\", data: { ... } } — 中一刀紙張 241×140mm",
  "type": "object",
  "required": ["company", "customer", "docInfo", "items", "totals"],
  "properties": {
    "company": {
      "type": "object",
      "description": "公司（賣方）資訊，印在表頭左上角",
      "required": ["name"],
      "properties": {
        "name": { "type": "string", "description": "公司名稱" },
        "address": { "type": "string", "description": "公司地址" },
        "tel": { "type": "string", "description": "電話" },
        "fax": { "type": "string", "description": "傳真" }
      }
    },
    "customer": {
      "type": "object",
      "description": "客戶（買方）資訊",
      "required": ["companyName"],
      "properties": {
        "companyName": { "type": "string", "description": "客戶公司名稱" },
        "taxId": { "type": "string", "description": "統一編號" },
        "invoiceAddress": { "type": "string", "description": "發票地址" },
        "shippingAddress": { "type": "string", "description": "送貨地址" },
        "companyCode": { "type": "string", "description": "客戶代號" },
        "phone": { "type": "string", "description": "客戶電話" },
        "paymentMethod": { "type": "string", "description": "付款方式（月結30天、現金等）" }
      }
    },
    "docInfo": {
      "type": "object",
      "description": "單據資訊",
      "required": ["date", "docNumber"],
      "properties": {
        "date": { "type": "string", "description": "銷貨日期，格式 YYYY/MM/DD" },
        "docNumber": { "type": "string", "description": "銷貨單號" },
        "invoiceNumber": { "type": "string", "description": "發票號碼（選填）" }
      }
    },
    "items": {
      "type": "array",
      "description": "銷貨明細，每筆一列",
      "items": {
        "type": "object",
        "required": ["productName", "qty", "unitPrice", "amount"],
        "properties": {
          "englishName": { "type": "string", "description": "英文品名" },
          "productName": { "type": "string", "description": "貨品名稱（中文）" },
          "qty": { "type": "number", "description": "數量" },
          "unit": { "type": "string", "description": "單位（箱、個、瓶等）" },
          "spec": { "type": "string", "description": "規格" },
          "unitPrice": { "type": "number", "description": "單價" },
          "amount": { "type": "number", "description": "金額（數量×單價）" },
          "lotNumber": { "type": "string", "description": "批號" },
          "expiryDate": { "type": "string", "description": "有效日期，格式 YYYY/MM/DD" }
        }
      }
    },
    "totals": {
      "type": "object",
      "description": "合計區",
      "required": ["totalDue"],
      "properties": {
        "subtotal": { "type": "number", "description": "貨單總計" },
        "overpayment": { "type": "number", "description": "溢收" },
        "discount": { "type": "number", "description": "折讓" },
        "totalDue": { "type": "number", "description": "應收合計" }
      }
    },
    "notes": {
      "type": "string",
      "description": "附註（印在合計下方）"
    }
  },
  "examples": [
    {
      "company": {
        "name": "台灣優質食品股份有限公司",
        "address": "台北市中山區南京東路三段100號5F",
        "tel": "(02)2505-1234",
        "fax": "(02)2505-5678"
      },
      "customer": {
        "companyName": "全聯福利中心 民生店",
        "taxId": "12345678",
        "invoiceAddress": "台北市松山區民生東路五段200號",
        "shippingAddress": "台北市松山區民生東路五段200號",
        "companyCode": "A001",
        "phone": "(02)2760-1234",
        "paymentMethod": "月結30天"
      },
      "docInfo": {
        "date": "2026/02/27",
        "docNumber": "SD-20260227-001",
        "invoiceNumber": "AB-12345678"
      },
      "items": [
        {
          "englishName": "Green Tea 600ml",
          "productName": "優質綠茶 600ml",
          "qty": 10,
          "unit": "箱",
          "spec": "24入/箱",
          "unitPrice": 360,
          "amount": 3600,
          "lotNumber": "L20260115",
          "expiryDate": "2027/01/15"
        },
        {
          "englishName": "Oolong Tea 600ml",
          "productName": "凍頂烏龍茶 600ml",
          "qty": 5,
          "unit": "箱",
          "spec": "24入/箱",
          "unitPrice": 400,
          "amount": 2000,
          "lotNumber": "L20260120",
          "expiryDate": "2027/01/20"
        },
        {
          "englishName": "Mineral Water 1500ml",
          "productName": "天然礦泉水 1500ml",
          "qty": 20,
          "unit": "箱",
          "spec": "12入/箱",
          "unitPrice": 180,
          "amount": 3600,
          "lotNumber": "L20260201",
          "expiryDate": "2028/02/01"
        }
      ],
      "totals": {
        "subtotal": 9200,
        "overpayment": 0,
        "discount": 200,
        "totalDue": 9000
      },
      "notes": "請於收貨時確認數量及品質，如有問題請於三日內反應。"
    }
  ]
}
